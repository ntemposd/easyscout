{% extends "base.html" %}
{% block title %}Easyscout â€” Scouting reports in seconds{% endblock %}

{% block body %}
<main class="max-w-6xl mx-auto px-4 py-10 space-y-8">

  <!-- Hero -->
  <section class="space-y-8">
    <div class="grid lg:grid-cols-[2fr_360px] gap-8 items-start">
      <div class="text-center lg:text-left max-w-3xl space-y-4">
        <h1 class="text-5xl md:text-6xl font-extrabold tracking-tight text-zinc-900">
          Scouting reports made <span class="bg-gradient-to-r from-[#F68A1F] to-[#6FD06B] bg-clip-text text-transparent">easy</span>
        </h1>
        <p class="text-lg text-zinc-700">
          Generate crisp, coach-ready scouting reports instantly. Capture latest stats and insights on any professional basketball player. Pay as you go: 1 credit = â‚¬1 per report.
        </p>

        <div class="flex flex-wrap justify-center lg:justify-start gap-3 pt-4">
          <a href="/login"
             data-analytics-cta="hero"
             class="btn-primary-lg">
            Get started
          </a>
          <a href="#demo"
             class="btn-secondary-lg">
            View demo
          </a>
        </div>
      </div>

      <!-- Sidebar: Feature highlights -->
      <aside class="space-y-4 h-full">
        <div class="bg-white border border-zinc-200 rounded-xl p-6 shadow-sm space-y-4 h-full">
          <div class="space-y-3">
            <div class="flex items-start gap-3">
              <div class="text-2xl">âš¡</div>
              <div>
                <div class="font-semibold text-sm">Instant reports</div>
                <div class="text-sm text-zinc-600">Generate and save in seconds</div>
              </div>
            </div>

            <div class="flex items-start gap-3">
              <div class="text-2xl">ðŸ“¸</div>
              <div>
                <div class="font-semibold text-sm">Season snapshots</div>
                <div class="text-sm text-zinc-600">Quick stats tables for context</div>
              </div>
            </div>

            <div class="flex items-start gap-3">
              <div class="text-2xl">ðŸŽ¯</div>
              <div>
                <div class="font-semibold text-sm">Coach-ready analysis</div>
                <div class="text-sm text-zinc-600">Strengths, weaknesses, gameplan notes</div>
              </div>
            </div>

            <div class="flex items-start gap-3">
              <div class="text-2xl">ðŸ’³</div>
              <div>
                <div class="font-semibold text-sm">Simple pricing</div>
                <div class="text-sm text-zinc-600">1 credit = â‚¬1 per report</div>
              </div>
            </div>
          </div>

          <div class="pt-3 border-t border-zinc-200">
            <a href="/login" data-analytics-cta="sidebar_cta" class="block w-full text-center btn-primary">
              Login to start
            </a>
          </div>
        </div>

      </aside>
    </div>
  </section>

  <!-- Demo -->
  <section id="demo" class="space-y-6">
    <div class="text-center lg:text-left space-y-2">
      <h2 class="text-4xl font-extrabold tracking-tight">See it in action</h2>
      <p class="text-lg text-zinc-600">Live preview of a Giannis Antetokounmpo scouting report</p>
    </div>

    <!-- Main content: demo form + report -->
    <div class="max-w-6xl mx-auto space-y-4">
      <div class="space-y-4">
        <!-- Generate form preview -->
        <div class="bg-white border border-zinc-200 rounded-xl p-6 shadow-sm space-y-4">
          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium">Player</label>
              <input disabled value="Giannis Antetokounmpo"
                class="mt-1 w-full rounded-md border bg-zinc-100 border-zinc-300 px-3 py-2 text-sm" />
            </div>

            <div>
              <label class="block text-sm font-medium">Team</label>
              <input disabled value="Milwaukee Bucks"
                class="mt-1 w-full rounded-md border bg-zinc-100 border-zinc-300 px-3 py-2 text-sm" />
            </div>
          </div>

          <div class="flex flex-wrap items-center gap-3 pt-2">
            <a href="/login"
              data-analytics-cta="demo_form"
              class="btn-primary inline-block">
              Login to generate this report
            </a>
            <span class="text-sm text-zinc-500">Costs 1 credit (â‚¬1)</span>
          </div>
        </div>

        <!-- Report output -->
        <div class="space-y-0">
          <h3 class="text-2xl font-extrabold tracking-tight section-title">Report</h3>
          <p class="text-sm section-desc text-zinc-600">Sample preview of a generated report.</p>
        </div>
        
        <div class="space-y-4">
          <div class="space-y-1">
            <div class="text-2xl font-bold text-zinc-900">Giannis Antetokounmpo</div>
            <div class="text-sm text-zinc-700">Paint pressure supernova who bends defenses every trip; elite defensive ground coverage.</div>
          </div>

            <div class="grid sm:grid-cols-2 gap-4">
              <section class="rounded-xl border border-zinc-200 bg-white p-5 shadow-sm">
                <div class="text-sm font-semibold text-zinc-900">Info</div>
                <div class="mt-3 overflow-auto">
                  <table class="w-full text-sm border-collapse">
                    <tbody>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Team</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">Milwaukee Bucks</td>
                      </tr>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">League</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">NBA</td>
                      </tr>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Position</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">F / C</td>
                      </tr>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Nationality</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">Greece / Nigeria</td>
                      </tr>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Height</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">6'11"</td>
                      </tr>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Weight</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">243 lb</td>
                      </tr>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Age / Birthdate</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">31 Â· Dec 6, 1994</td>
                      </tr>
                      <tr class="border-t border-zinc-200">
                        <td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Dominant hand</td>
                        <td class="py-2 font-medium whitespace-pre-line break-words">Right</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </section>

              <section class="rounded-xl border border-zinc-200 bg-white p-5 shadow-sm">
                <div class="text-sm font-semibold text-zinc-900">Grades</div>
                <div class="mt-3 overflow-auto">
                  <table class="w-full text-sm border-collapse">
                    <tbody>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Shooting</td><td class="py-2 font-medium whitespace-pre-line break-words">3.1/5</td></tr>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Finishing</td><td class="py-2 font-medium whitespace-pre-line break-words">4.8/5</td></tr>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Playmaking</td><td class="py-2 font-medium whitespace-pre-line break-words">4.2/5</td></tr>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Handle</td><td class="py-2 font-medium whitespace-pre-line break-words">3.8/5</td></tr>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Defense</td><td class="py-2 font-medium whitespace-pre-line break-words">4.6/5</td></tr>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Rebounding</td><td class="py-2 font-medium whitespace-pre-line break-words">4.7/5</td></tr>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">Athleticism</td><td class="py-2 font-medium whitespace-pre-line break-words">4.9/5</td></tr>
                      <tr class="border-t border-zinc-200"><td class="py-2 pr-4 text-zinc-500 whitespace-normal sm:whitespace-nowrap align-top">IQ / Decision-making</td><td class="py-2 font-medium whitespace-pre-line break-words">4.5/5</td></tr>
                    </tbody>
                  </table>
                </div>
              </section>
            </div>

            <section>
              <div class="leading-relaxed break-words text-sm
                [&_h1]:text-xl [&_h1]:font-bold [&_h1]:mt-4 [&_h1]:mb-2
                [&_h2]:text-lg [&_h2]:font-bold [&_h2]:mt-4 [&_h2]:mb-2
                [&_h3]:text-base [&_h3]:font-semibold [&_h3]:mt-3 [&_h3]:mb-1
                [&_p]:my-2
                [&_ul]:list-disc [&_ul]:pl-5 [&_ul]:my-2
                [&_ol]:list-decimal [&_ol]:pl-5 [&_ol]:my-2
                [&_li]:my-1
                [&_hr]:my-4 [&_hr]:opacity-30
                [&_pre]:my-3 [&_pre]:p-3 [&_pre]:rounded-md [&_pre]:overflow-auto [&_pre]:bg-zinc-100
                [&_code]:font-mono">
                <h3>Strengths</h3>
                <ul>
                  <li>Elite rim pressure + transition force; collapses defenses on the catch.</li>
                  <li>Finishes through contact and length; punishes smalls in the paint.</li>
                  <li>Playmaking growth: hits corner + dunker spot + short-roll reads.</li>
                  <li>Defensive ground coverage: weakside rim help, closeouts, and glass.</li>
                </ul>

                <h3>Areas to tighten</h3>
                <ul>
                  <li>Walling the lane early forces kick-outs; needs spacing discipline around him.</li>
                  <li>Live-ball turnovers when crowded by multiple bodies; simplify reads vs zones.</li>
                  <li>Pull-up and midrange consistency remain the swing skills vs deep drop.</li>
                </ul>

                <h3>Gameplan notes</h3>
                <ul>
                  <li>Build a wall early at nail/elbows; rotate on the kick-out, live with contests.</li>
                  <li>Make him finish over size from a standstill; avoid reaching (fouls/FTs).</li>
                  <li>Offensively, surround with shooting and run inverted PnR to force switches.</li>
                </ul>
              </div>
            </section>

            <section class="rounded-xl border border-zinc-200 bg-white p-5 shadow-sm">
              <div class="text-sm font-semibold text-zinc-900">Season Snapshot</div>
              <div class="mt-3 overflow-auto">
                <table class="w-full text-sm border-collapse" style="table-layout:fixed;">
                  <colgroup>
                    <col style="width:220px" />
                    <col style="width:88px" />
                    <col style="width:88px" />
                    <col style="width:88px" />
                    <col style="width:88px" />
                  </colgroup>
                  <thead>
                    <tr class="border-b border-zinc-200">
                      <th class="py-2 pr-4 text-left text-zinc-500 font-medium">GAMES</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">PTS</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">REB</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">AST</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">FG</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="border-t border-zinc-200">
                      <td class="py-2 pr-4 text-left font-medium">73</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">30.4</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">11.5</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">6.5</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">61.1%</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="mt-2 text-xs text-zinc-500">(Demo numbers only)</div>
            </section>

            <section class="rounded-xl border border-zinc-200 bg-white p-5 shadow-sm">
              <div class="text-sm font-semibold text-zinc-900">Last 3 Games</div>
              <div class="mt-3 overflow-auto">
                <table class="w-full text-sm border-collapse" style="table-layout:fixed;">
                  <colgroup>
                    <col style="width:220px" />
                    <col style="width:88px" />
                    <col style="width:88px" />
                    <col style="width:88px" />
                    <col style="width:88px" />
                  </colgroup>
                  <thead>
                    <tr class="border-b border-zinc-200">
                      <th class="py-2 pr-4 text-left text-zinc-500 font-medium">OPP</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">PTS</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">REB</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">AST</th>
                      <th class="py-2 pl-4 text-right text-zinc-500 font-medium">FG</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="border-t border-zinc-200">
                      <td class="py-2 pr-4 text-left font-medium">@PHI</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">35</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">12</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">6</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">59%</td>
                    </tr>
                    <tr class="border-t border-zinc-200">
                      <td class="py-2 pr-4 text-left font-medium">vs BOS</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">32</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">10</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">7</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">55%</td>
                    </tr>
                    <tr class="border-t border-zinc-200">
                      <td class="py-2 pr-4 text-left font-medium">@ MIA</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">28</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">9</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">5</td>
                      <td class="py-2 pl-4 text-right font-medium" style="font-variant-numeric: tabular-nums;">52%</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="mt-2 text-xs text-zinc-500">(Demo numbers only)</div>
            </section>
          </div>
        </div>
    </div>
  </section>

  <!-- Footer CTA -->
  <section class="bg-gradient-to-br from-[#0E2018] to-[#1A2E1C] text-white rounded-2xl p-8 md:p-12 shadow-lg">
    <div class="text-center space-y-4">
      <h2 class="text-3xl font-extrabold tracking-tight">Ready to scout like a pro?</h2>
      <p class="text-zinc-300">
        Join coaches and analysts using Easyscout to generate instant, actionable scouting reports.
      </p>
      <div class="pt-2">
        <a href="/login" data-analytics-cta="footer" 
           class="inline-block btn-primary-lg">
          Get started now
        </a>
      </div>
      <p class="text-sm text-zinc-400">
        No subscription required â€¢ Pay per report â€¢ Top up anytime
      </p>
    </div>
  </section>

</main>
{% endblock %}

{% block scripts %}
<script>
  // If already signed in, bounce to /app
  (async () => {
    if (!window.sb || !window.sb.auth) return;
    const { data } = await window.sb.auth.getSession();
    if (data?.session) window.location.replace("/app");
  })();

  // Analytics: track CTA clicks
  function trackCTA(source) {
    const distinctId = window.getDistinctId ? window.getDistinctId() : crypto.randomUUID();
    fetch('/api/analytics', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        event: 'landing_cta_click',
        properties: { 
          source: source,
          distinct_id: distinctId
        }
      })
    }).catch(() => {}); // fire and forget
  }

  // Attach click handlers to all login CTAs
  document.querySelectorAll('[data-analytics-cta]').forEach(el => {
    el.addEventListener('click', () => {
      trackCTA(el.getAttribute('data-analytics-cta'));
    });
  });
</script>
{% endblock %}
